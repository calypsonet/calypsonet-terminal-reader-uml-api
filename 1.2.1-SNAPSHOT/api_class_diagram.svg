<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="1484px" preserveAspectRatio="none" style="width:2925px;height:1484px;background:#FFFFFF;" version="1.1" viewBox="0 0 2925 1484" width="2925px" zoomAndPan="magnify"><defs/><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="472" x="1219.5" y="25.1074">Calypsonet - calypsonet-terminal-reader-java-api - 1.2.+ (10/01/2023)</text><!--MD5=[a5decc184066de113c6f9732c0892d3a]
cluster readerApi--><g id="cluster_readerApi"><path d="M8.5,132.9011 L225.5,132.9011 A3.75,3.75 0 0 1 228,135.4011 L235,157.5222 L2915.5,157.5222 A2.5,2.5 0 0 1 2918,160.0222 L2918,1475.4011 A2.5,2.5 0 0 1 2915.5,1477.9011 L8.5,1477.9011 A2.5,2.5 0 0 1 6,1475.4011 L6,135.4011 A2.5,2.5 0 0 1 8.5,132.9011 " fill="#F8F9F9" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="6" x2="235" y1="157.5222" y2="157.5222"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="216" x="10" y="150.0085">org.calypsonet.terminal.reader</text></g><!--MD5=[0af762fd8359575df4da93533d6338ab]
cluster readerSpi--><g id="cluster_readerSpi"><path d="M1554.5,893.9011 L1576.5,893.9011 A3.75,3.75 0 0 1 1579,896.4011 L1586,918.5222 L2578.5,918.5222 A2.5,2.5 0 0 1 2581,921.0222 L2581,1032.4011 A2.5,2.5 0 0 1 2578.5,1034.9011 L1554.5,1034.9011 A2.5,2.5 0 0 1 1552,1032.4011 L1552,896.4011 A2.5,2.5 0 0 1 1554.5,893.9011 " fill="#F2F3F4" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="1552" x2="1586" y1="918.5222" y2="918.5222"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="21" x="1556" y="911.0085">spi</text></g><!--MD5=[2ef70ab4f822c198fdf53fd79da95100]
cluster selectionApi--><g id="cluster_selectionApi"><path d="M32.5,177.9011 L98.5,177.9011 A3.75,3.75 0 0 1 101,180.4011 L108,202.5222 L1257.5,202.5222 A2.5,2.5 0 0 1 1260,205.0222 L1260,1065.4011 A2.5,2.5 0 0 1 1257.5,1067.9011 L32.5,1067.9011 A2.5,2.5 0 0 1 30,1065.4011 L30,180.4011 A2.5,2.5 0 0 1 32.5,177.9011 " fill="#F2F3F4" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="30" x2="108" y1="202.5222" y2="202.5222"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="65" x="34" y="195.0085">selection</text></g><!--MD5=[c96d8bee8ec60da1ef6ad554183a6a76]
cluster selectionSpi--><g id="cluster_selectionSpi"><path d="M56.5,884.9011 L78.5,884.9011 A3.75,3.75 0 0 1 81,887.4011 L88,909.5222 L522.5,909.5222 A2.5,2.5 0 0 1 525,912.0222 L525,1041.4011 A2.5,2.5 0 0 1 522.5,1043.9011 L56.5,1043.9011 A2.5,2.5 0 0 1 54,1041.4011 L54,887.4011 A2.5,2.5 0 0 1 56.5,884.9011 " fill="#E5E7E9" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="54" x2="88" y1="909.5222" y2="909.5222"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="21" x="58" y="902.0085">spi</text></g><!--MD5=[0dee1c75f9ece47f254a0a355731a0bb]
class ReaderCommunicationException--><g id="elem_ReaderCommunicationException"><rect codeLine="153" fill="#FEFECE" height="100.4844" id="ReaderCommunicationException" rx="2.5" ry="2.5" style="stroke:#D4AC0D;stroke-width:2.0;" width="459" x="26.5" y="1326.9011"/><ellipse cx="143.75" cy="1350.5222" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M146.5156,1346.3972 Q146.6719,1346.1784 146.8594,1346.0691 Q147.0469,1345.9597 147.2656,1345.9597 Q147.6406,1345.9597 147.875,1346.2253 Q148.1094,1346.4753 148.1094,1347.0847 L148.1094,1348.5378 Q148.1094,1349.1472 147.875,1349.4128 Q147.6406,1349.6784 147.2656,1349.6784 Q146.9219,1349.6784 146.7188,1349.4753 Q146.5156,1349.2878 146.4063,1348.7722 Q146.3594,1348.4128 146.1719,1348.2253 Q145.8438,1347.8503 145.2344,1347.6316 Q144.625,1347.4128 144,1347.4128 Q143.2344,1347.4128 142.5938,1347.7409 Q141.9688,1348.0691 141.4688,1348.8191 Q140.9844,1349.5691 140.9844,1350.6003 L140.9844,1351.6941 Q140.9844,1352.9284 141.875,1353.7566 Q142.7656,1354.5691 144.3594,1354.5691 Q145.2969,1354.5691 145.9531,1354.3191 Q146.3438,1354.1628 146.7656,1353.7253 Q147.0313,1353.4597 147.1719,1353.3816 Q147.3281,1353.3034 147.5313,1353.3034 Q147.8594,1353.3034 148.1094,1353.5691 Q148.375,1353.8191 148.375,1354.1628 Q148.375,1354.5066 148.0313,1354.9128 Q147.5313,1355.4909 146.7344,1355.8191 Q145.6563,1356.2722 144.3594,1356.2722 Q142.8438,1356.2722 141.6406,1355.6472 Q140.6563,1355.1472 139.9688,1354.0847 Q139.2813,1353.0066 139.2813,1351.7253 L139.2813,1350.5691 Q139.2813,1349.2409 139.8906,1348.1003 Q140.5156,1346.9441 141.6094,1346.3347 Q142.7031,1345.7097 143.9375,1345.7097 Q144.6719,1345.7097 145.3125,1345.8816 Q145.9688,1346.0378 146.5156,1346.3972 Z " fill="#000000"/><ellipse cx="169.25" cy="1350.0222" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="129" x="213.25" y="1347.0085">«RuntimeException»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="205" x="175.25" y="1365.6296">ReaderCommunicationException</text><line style="stroke:#D4AC0D;stroke-width:2.0;" x1="27.5" x2="484.5" y1="1374.1433" y2="1374.1433"/><line style="stroke:#D4AC0D;stroke-width:2.0;" x1="27.5" x2="484.5" y1="1382.1433" y2="1382.1433"/><ellipse cx="37.5" cy="1396.9538" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="317" x="46.5" y="1401.2507">ReaderCommunicationException (String message)</text><ellipse cx="37.5" cy="1415.5749" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="433" x="46.5" y="1419.8718">ReaderCommunicationException (String message, Throwable cause)</text></g><!--MD5=[3f64bfe3b1698c1197202681f77be61a]
class ReaderProtocolNotSupportedException--><g id="elem_ReaderProtocolNotSupportedException"><rect codeLine="157" fill="#FEFECE" height="81.8633" id="ReaderProtocolNotSupportedException" rx="2.5" ry="2.5" style="stroke:#D4AC0D;stroke-width:2.0;" width="467" x="22.5" y="1143.9011"/><ellipse cx="122.75" cy="1167.5222" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M125.5156,1163.3972 Q125.6719,1163.1784 125.8594,1163.0691 Q126.0469,1162.9597 126.2656,1162.9597 Q126.6406,1162.9597 126.875,1163.2253 Q127.1094,1163.4753 127.1094,1164.0847 L127.1094,1165.5378 Q127.1094,1166.1472 126.875,1166.4128 Q126.6406,1166.6784 126.2656,1166.6784 Q125.9219,1166.6784 125.7188,1166.4753 Q125.5156,1166.2878 125.4063,1165.7722 Q125.3594,1165.4128 125.1719,1165.2253 Q124.8438,1164.8503 124.2344,1164.6316 Q123.625,1164.4128 123,1164.4128 Q122.2344,1164.4128 121.5938,1164.7409 Q120.9688,1165.0691 120.4688,1165.8191 Q119.9844,1166.5691 119.9844,1167.6003 L119.9844,1168.6941 Q119.9844,1169.9284 120.875,1170.7566 Q121.7656,1171.5691 123.3594,1171.5691 Q124.2969,1171.5691 124.9531,1171.3191 Q125.3438,1171.1628 125.7656,1170.7253 Q126.0313,1170.4597 126.1719,1170.3816 Q126.3281,1170.3034 126.5313,1170.3034 Q126.8594,1170.3034 127.1094,1170.5691 Q127.375,1170.8191 127.375,1171.1628 Q127.375,1171.5066 127.0313,1171.9128 Q126.5313,1172.4909 125.7344,1172.8191 Q124.6563,1173.2722 123.3594,1173.2722 Q121.8438,1173.2722 120.6406,1172.6472 Q119.6563,1172.1472 118.9688,1171.0847 Q118.2813,1170.0066 118.2813,1168.7253 L118.2813,1167.5691 Q118.2813,1166.2409 118.8906,1165.1003 Q119.5156,1163.9441 120.6094,1163.3347 Q121.7031,1162.7097 122.9375,1162.7097 Q123.6719,1162.7097 124.3125,1162.8816 Q124.9688,1163.0378 125.5156,1163.3972 Z " fill="#000000"/><ellipse cx="148.25" cy="1167.0222" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="129" x="213.25" y="1164.0085">«RuntimeException»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="247" x="154.25" y="1182.6296">ReaderProtocolNotSupportedException</text><line style="stroke:#D4AC0D;stroke-width:2.0;" x1="23.5" x2="488.5" y1="1191.1433" y2="1191.1433"/><line style="stroke:#D4AC0D;stroke-width:2.0;" x1="23.5" x2="488.5" y1="1199.1433" y2="1199.1433"/><ellipse cx="33.5" cy="1213.9538" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="441" x="42.5" y="1218.2507">ReaderProtocolNotSupportedException (String physicalProtocolName)</text></g><!--MD5=[32fc7b65f340d78e9416d68a58b55b2e]
class CardCommunicationException--><g id="elem_CardCommunicationException"><rect codeLine="160" fill="#FEFECE" height="100.4844" id="CardCommunicationException" rx="2.5" ry="2.5" style="stroke:#D4AC0D;stroke-width:2.0;" width="443" x="520.5" y="1326.9011"/><ellipse cx="637.75" cy="1350.5222" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M640.5156,1346.3972 Q640.6719,1346.1784 640.8594,1346.0691 Q641.0469,1345.9597 641.2656,1345.9597 Q641.6406,1345.9597 641.875,1346.2253 Q642.1094,1346.4753 642.1094,1347.0847 L642.1094,1348.5378 Q642.1094,1349.1472 641.875,1349.4128 Q641.6406,1349.6784 641.2656,1349.6784 Q640.9219,1349.6784 640.7188,1349.4753 Q640.5156,1349.2878 640.4063,1348.7722 Q640.3594,1348.4128 640.1719,1348.2253 Q639.8438,1347.8503 639.2344,1347.6316 Q638.625,1347.4128 638,1347.4128 Q637.2344,1347.4128 636.5938,1347.7409 Q635.9688,1348.0691 635.4688,1348.8191 Q634.9844,1349.5691 634.9844,1350.6003 L634.9844,1351.6941 Q634.9844,1352.9284 635.875,1353.7566 Q636.7656,1354.5691 638.3594,1354.5691 Q639.2969,1354.5691 639.9531,1354.3191 Q640.3438,1354.1628 640.7656,1353.7253 Q641.0313,1353.4597 641.1719,1353.3816 Q641.3281,1353.3034 641.5313,1353.3034 Q641.8594,1353.3034 642.1094,1353.5691 Q642.375,1353.8191 642.375,1354.1628 Q642.375,1354.5066 642.0313,1354.9128 Q641.5313,1355.4909 640.7344,1355.8191 Q639.6563,1356.2722 638.3594,1356.2722 Q636.8438,1356.2722 635.6406,1355.6472 Q634.6563,1355.1472 633.9688,1354.0847 Q633.2813,1353.0066 633.2813,1351.7253 L633.2813,1350.5691 Q633.2813,1349.2409 633.8906,1348.1003 Q634.5156,1346.9441 635.6094,1346.3347 Q636.7031,1345.7097 637.9375,1345.7097 Q638.6719,1345.7097 639.3125,1345.8816 Q639.9688,1346.0378 640.5156,1346.3972 Z " fill="#000000"/><ellipse cx="663.25" cy="1350.0222" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="129" x="699.25" y="1347.0085">«RuntimeException»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="189" x="669.25" y="1365.6296">CardCommunicationException</text><line style="stroke:#D4AC0D;stroke-width:2.0;" x1="521.5" x2="962.5" y1="1374.1433" y2="1374.1433"/><line style="stroke:#D4AC0D;stroke-width:2.0;" x1="521.5" x2="962.5" y1="1382.1433" y2="1382.1433"/><ellipse cx="531.5" cy="1396.9538" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="301" x="540.5" y="1401.2507">CardCommunicationException (String message)</text><ellipse cx="531.5" cy="1415.5749" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="417" x="540.5" y="1419.8718">CardCommunicationException (String message, Throwable cause)</text></g><!--MD5=[120218adfd8782b0057db0a1b8294250]
class ApiProperties--><g id="elem_ApiProperties"><rect codeLine="56" fill="#FEFECE" height="66.6211" id="ApiProperties" rx="2.5" ry="2.5" style="stroke:#D4AC0D;stroke-width:2.0;" width="209" x="1501.5" y="337.9011"/><ellipse cx="1516.5" cy="353.9011" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M1519.2656,349.7761 Q1519.4219,349.5573 1519.6094,349.448 Q1519.7969,349.3386 1520.0156,349.3386 Q1520.3906,349.3386 1520.625,349.6042 Q1520.8594,349.8542 1520.8594,350.4636 L1520.8594,351.9167 Q1520.8594,352.5261 1520.625,352.7917 Q1520.3906,353.0573 1520.0156,353.0573 Q1519.6719,353.0573 1519.4688,352.8542 Q1519.2656,352.6667 1519.1563,352.1511 Q1519.1094,351.7917 1518.9219,351.6042 Q1518.5938,351.2292 1517.9844,351.0105 Q1517.375,350.7917 1516.75,350.7917 Q1515.9844,350.7917 1515.3438,351.1198 Q1514.7188,351.448 1514.2188,352.198 Q1513.7344,352.948 1513.7344,353.9792 L1513.7344,355.073 Q1513.7344,356.3073 1514.625,357.1355 Q1515.5156,357.948 1517.1094,357.948 Q1518.0469,357.948 1518.7031,357.698 Q1519.0938,357.5417 1519.5156,357.1042 Q1519.7813,356.8386 1519.9219,356.7605 Q1520.0781,356.6823 1520.2813,356.6823 Q1520.6094,356.6823 1520.8594,356.948 Q1521.125,357.198 1521.125,357.5417 Q1521.125,357.8855 1520.7813,358.2917 Q1520.2813,358.8698 1519.4844,359.198 Q1518.4063,359.6511 1517.1094,359.6511 Q1515.5938,359.6511 1514.3906,359.0261 Q1513.4063,358.5261 1512.7188,357.4636 Q1512.0313,356.3855 1512.0313,355.1042 L1512.0313,353.948 Q1512.0313,352.6198 1512.6406,351.4792 Q1513.2656,350.323 1514.3594,349.7136 Q1515.4531,349.0886 1516.6875,349.0886 Q1517.4219,349.0886 1518.0625,349.2605 Q1518.7188,349.4167 1519.2656,349.7761 Z " fill="#000000"/><ellipse cx="1535.5" cy="353.4011" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="30" x="1541.5" y="359.698">final</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="132" x="1575.5" y="359.698">ReaderApiProperties</text><line style="stroke:#D4AC0D;stroke-width:2.0;" x1="1502.5" x2="1709.5" y1="369.9011" y2="369.9011"/><ellipse cx="1512.5" cy="384.7116" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" text-decoration="underline" textLength="30" x="1521.5" y="389.0085">final</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" text-decoration="underline" textLength="101" x="1555.5" y="389.0085">String VERSION</text><line style="stroke:#D4AC0D;stroke-width:2.0;" x1="1502.5" x2="1709.5" y1="396.5222" y2="396.5222"/></g><!--MD5=[9b9eb2a75cf02134ca888acb9ec1b2e1]
class CardReader--><g id="elem_CardReader"><rect codeLine="59" fill="#FEFECE" height="103.8633" id="CardReader" rx="2.5" ry="2.5" style="stroke:#D4AC0D;stroke-width:2.0;" width="185" x="1803.5" y="319.4011"/><ellipse cx="1847.3" cy="335.4011" fill="#B4A7E5" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M1848.2531,332.0417 L1848.2531,338.698 L1849.9719,338.698 Q1850.5813,338.698 1850.8469,338.9323 Q1851.1125,339.1667 1851.1125,339.5573 Q1851.1125,339.9323 1850.8469,340.1667 Q1850.5813,340.4011 1849.9719,340.4011 L1844.8313,340.4011 Q1844.2219,340.4011 1843.9563,340.1667 Q1843.6906,339.9323 1843.6906,339.5417 Q1843.6906,339.1667 1843.9563,338.9323 Q1844.2219,338.698 1844.8313,338.698 L1846.55,338.698 L1846.55,332.0417 L1844.8313,332.0417 Q1844.2219,332.0417 1843.9563,331.8073 Q1843.6906,331.573 1843.6906,331.1823 Q1843.6906,330.8073 1843.9563,330.573 Q1844.2219,330.3386 1844.8313,330.3386 L1849.9719,330.3386 Q1850.5813,330.3386 1850.8469,330.573 Q1851.1125,330.8073 1851.1125,331.1823 Q1851.1125,331.573 1850.8469,331.8073 Q1850.5813,332.0417 1849.9719,332.0417 L1848.2531,332.0417 Z " fill="#000000"/><ellipse cx="1872.7" cy="334.9011" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="78" x="1878.7" y="341.198">CardReader</text><line style="stroke:#D4AC0D;stroke-width:2.0;" x1="1804.5" x2="1987.5" y1="351.4011" y2="351.4011"/><line style="stroke:#D4AC0D;stroke-width:2.0;" x1="1804.5" x2="1987.5" y1="359.4011" y2="359.4011"/><ellipse cx="1814.5" cy="374.2116" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="111" x="1823.5" y="378.5085">String getName ()</text><ellipse cx="1814.5" cy="392.8327" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="153" x="1823.5" y="397.1296">boolean isContactless ()</text><ellipse cx="1814.5" cy="411.4538" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="159" x="1823.5" y="415.7507">boolean isCardPresent ()</text></g><!--MD5=[804ce276a6dc3f86faefc07689b73fdf]
class ConfigurableCardReader--><g id="elem_ConfigurableCardReader"><rect codeLine="64" fill="#FEFECE" height="103.8633" id="ConfigurableCardReader" rx="2.5" ry="2.5" style="stroke:#D4AC0D;stroke-width:2.0;" width="528" x="2350" y="650.9011"/><ellipse cx="2524.75" cy="666.9011" fill="#B4A7E5" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M2525.7031,663.5417 L2525.7031,670.198 L2527.4219,670.198 Q2528.0313,670.198 2528.2969,670.4323 Q2528.5625,670.6667 2528.5625,671.0573 Q2528.5625,671.4323 2528.2969,671.6667 Q2528.0313,671.9011 2527.4219,671.9011 L2522.2813,671.9011 Q2521.6719,671.9011 2521.4063,671.6667 Q2521.1406,671.4323 2521.1406,671.0417 Q2521.1406,670.6667 2521.4063,670.4323 Q2521.6719,670.198 2522.2813,670.198 L2524,670.198 L2524,663.5417 L2522.2813,663.5417 Q2521.6719,663.5417 2521.4063,663.3073 Q2521.1406,663.073 2521.1406,662.6823 Q2521.1406,662.3073 2521.4063,662.073 Q2521.6719,661.8386 2522.2813,661.8386 L2527.4219,661.8386 Q2528.0313,661.8386 2528.2969,662.073 Q2528.5625,662.3073 2528.5625,662.6823 Q2528.5625,663.073 2528.2969,663.3073 Q2528.0313,663.5417 2527.4219,663.5417 L2525.7031,663.5417 Z " fill="#000000"/><ellipse cx="2550.25" cy="666.4011" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="159" x="2556.25" y="672.698">ConfigurableCardReader</text><line style="stroke:#D4AC0D;stroke-width:2.0;" x1="2351" x2="2877" y1="682.9011" y2="682.9011"/><line style="stroke:#D4AC0D;stroke-width:2.0;" x1="2351" x2="2877" y1="690.9011" y2="690.9011"/><ellipse cx="2361" cy="705.7116" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="502" x="2370" y="710.0085">void activateProtocol (String logicalProtocolName, String physicalProtocolName)</text><ellipse cx="2361" cy="724.3327" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="330" x="2370" y="728.6296">void deactivateProtocol (String logicalProtocolName)</text><ellipse cx="2361" cy="742.9538" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="175" x="2370" y="747.2507">String getCurrentProtocol ()</text></g><!--MD5=[d49bae05a0ef9926e55d34fb069365d5]
class ObservableCardReader--><g id="elem_ObservableCardReader"><rect codeLine="69" fill="#FEFECE" height="234.2109" id="ObservableCardReader" rx="2.5" ry="2.5" style="stroke:#D4AC0D;stroke-width:2.0;" width="721" x="1593.5" y="585.9011"/><ellipse cx="1869.25" cy="601.9011" fill="#B4A7E5" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M1870.2031,598.5417 L1870.2031,605.198 L1871.9219,605.198 Q1872.5313,605.198 1872.7969,605.4323 Q1873.0625,605.6667 1873.0625,606.0573 Q1873.0625,606.4323 1872.7969,606.6667 Q1872.5313,606.9011 1871.9219,606.9011 L1866.7813,606.9011 Q1866.1719,606.9011 1865.9063,606.6667 Q1865.6406,606.4323 1865.6406,606.0417 Q1865.6406,605.6667 1865.9063,605.4323 Q1866.1719,605.198 1866.7813,605.198 L1868.5,605.198 L1868.5,598.5417 L1866.7813,598.5417 Q1866.1719,598.5417 1865.9063,598.3073 Q1865.6406,598.073 1865.6406,597.6823 Q1865.6406,597.3073 1865.9063,597.073 Q1866.1719,596.8386 1866.7813,596.8386 L1871.9219,596.8386 Q1872.5313,596.8386 1872.7969,597.073 Q1873.0625,597.3073 1873.0625,597.6823 Q1873.0625,598.073 1872.7969,598.3073 Q1872.5313,598.5417 1871.9219,598.5417 L1870.2031,598.5417 Z " fill="#000000"/><ellipse cx="1894.75" cy="601.4011" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="150" x="1900.75" y="607.698">ObservableCardReader</text><line style="stroke:#D4AC0D;stroke-width:2.0;" x1="1594.5" x2="2313.5" y1="617.9011" y2="617.9011"/><line style="stroke:#D4AC0D;stroke-width:2.0;" x1="1594.5" x2="2313.5" y1="625.9011" y2="625.9011"/><ellipse cx="1604.5" cy="640.7116" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="695" x="1613.5" y="645.0085">void setReaderObservationExceptionHandler (CardReaderObservationExceptionHandlerSpi exceptionHandler)</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4" x="1613.5" y="663.6296"> </text><ellipse cx="1604.5" cy="677.9538" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="344" x="1613.5" y="682.2507">void addObserver (CardReaderObserverSpi observer)</text><ellipse cx="1604.5" cy="696.5749" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="367" x="1613.5" y="700.8718">void removeObserver (CardReaderObserverSpi observer)</text><ellipse cx="1604.5" cy="715.196" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="141" x="1613.5" y="719.4929">void clearObservers ()</text><ellipse cx="1604.5" cy="733.8171" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="134" x="1613.5" y="738.114">int countObservers ()</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4" x="1613.5" y="756.7351"> </text><ellipse cx="1604.5" cy="771.0593" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="355" x="1613.5" y="775.3562">void startCardDetection (DetectionMode detectionMode)</text><ellipse cx="1604.5" cy="789.6804" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="162" x="1613.5" y="793.9773">void stopCardDetection ()</text><ellipse cx="1604.5" cy="808.3015" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="188" x="1613.5" y="812.5984">void finalizeCardProcessing ()</text></g><!--MD5=[f9e56a49e679096f1681e872e7fe17dc]
class DetectionMode--><g id="elem_DetectionMode"><rect codeLine="81" fill="#FEFECE" height="85.2422" id="DetectionMode" rx="2.5" ry="2.5" style="stroke:#D4AC0D;stroke-width:2.0;" width="138" x="1385" y="660.4011"/><ellipse cx="1400" cy="676.4011" fill="#EB937F" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M1398.8594,677.198 L1398.8594,679.698 L1403.1875,679.698 L1403.1875,678.7761 Q1403.1875,678.1667 1403.4219,677.9011 Q1403.6719,677.6355 1404.0469,677.6355 Q1404.4219,677.6355 1404.6563,677.9011 Q1404.8906,678.1667 1404.8906,678.7761 L1404.8906,681.4011 L1396.8906,681.4011 Q1396.2656,681.4011 1396,681.1667 Q1395.75,680.9323 1395.75,680.5417 Q1395.75,680.1667 1396.0156,679.9323 Q1396.2813,679.698 1396.8906,679.698 L1397.1563,679.698 L1397.1563,673.0417 L1396.8906,673.0417 Q1396.2656,673.0417 1396,672.8073 Q1395.75,672.573 1395.75,672.1823 Q1395.75,671.8073 1396,671.573 Q1396.2656,671.3386 1396.8906,671.3386 L1404.5156,671.3386 L1404.5156,673.9323 Q1404.5156,674.5417 1404.2813,674.8073 Q1404.0625,675.0573 1403.6719,675.0573 Q1403.2969,675.0573 1403.0625,674.8073 Q1402.8281,674.5417 1402.8281,673.9323 L1402.8281,673.0417 L1398.8594,673.0417 L1398.8594,675.4948 L1400.3438,675.4948 Q1400.3438,674.8386 1400.4688,674.6511 Q1400.7344,674.2448 1401.2031,674.2448 Q1401.5781,674.2448 1401.8125,674.5105 Q1402.0469,674.7605 1402.0469,675.3698 L1402.0469,677.3386 Q1402.0469,677.8855 1401.9219,678.073 Q1401.6563,678.4636 1401.2031,678.4636 Q1400.7344,678.4636 1400.4688,678.0573 Q1400.3438,677.8698 1400.3438,677.198 L1398.8594,677.198 Z " fill="#000000"/><ellipse cx="1419" cy="675.9011" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="95" x="1425" y="682.198">DetectionMode</text><line style="stroke:#D4AC0D;stroke-width:2.0;" x1="1386" x2="1522" y1="692.4011" y2="692.4011"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="78" x="1391" y="711.5085">REPEATING</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="87" x="1391" y="730.1296">SINGLESHOT</text><line style="stroke:#D4AC0D;stroke-width:2.0;" x1="1386" x2="1522" y1="737.6433" y2="737.6433"/></g><!--MD5=[b4b6a5721e02f7cea6ba89274ea67351]
class NotificationMode--><g id="elem_NotificationMode"><rect codeLine="85" fill="#FEFECE" height="85.2422" id="NotificationMode" rx="2.5" ry="2.5" style="stroke:#D4AC0D;stroke-width:2.0;" width="147" x="1385.5" y="942.9011"/><ellipse cx="1400.5" cy="958.9011" fill="#EB937F" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M1399.3594,959.698 L1399.3594,962.198 L1403.6875,962.198 L1403.6875,961.2761 Q1403.6875,960.6667 1403.9219,960.4011 Q1404.1719,960.1355 1404.5469,960.1355 Q1404.9219,960.1355 1405.1563,960.4011 Q1405.3906,960.6667 1405.3906,961.2761 L1405.3906,963.9011 L1397.3906,963.9011 Q1396.7656,963.9011 1396.5,963.6667 Q1396.25,963.4323 1396.25,963.0417 Q1396.25,962.6667 1396.5156,962.4323 Q1396.7813,962.198 1397.3906,962.198 L1397.6563,962.198 L1397.6563,955.5417 L1397.3906,955.5417 Q1396.7656,955.5417 1396.5,955.3073 Q1396.25,955.073 1396.25,954.6823 Q1396.25,954.3073 1396.5,954.073 Q1396.7656,953.8386 1397.3906,953.8386 L1405.0156,953.8386 L1405.0156,956.4323 Q1405.0156,957.0417 1404.7813,957.3073 Q1404.5625,957.5573 1404.1719,957.5573 Q1403.7969,957.5573 1403.5625,957.3073 Q1403.3281,957.0417 1403.3281,956.4323 L1403.3281,955.5417 L1399.3594,955.5417 L1399.3594,957.9948 L1400.8438,957.9948 Q1400.8438,957.3386 1400.9688,957.1511 Q1401.2344,956.7448 1401.7031,956.7448 Q1402.0781,956.7448 1402.3125,957.0105 Q1402.5469,957.2605 1402.5469,957.8698 L1402.5469,959.8386 Q1402.5469,960.3855 1402.4219,960.573 Q1402.1563,960.9636 1401.7031,960.9636 Q1401.2344,960.9636 1400.9688,960.5573 Q1400.8438,960.3698 1400.8438,959.698 L1399.3594,959.698 Z " fill="#000000"/><ellipse cx="1419.5" cy="958.4011" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="104" x="1425.5" y="964.698">NotificationMode</text><line style="stroke:#D4AC0D;stroke-width:2.0;" x1="1386.5" x2="1531.5" y1="974.9011" y2="974.9011"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="57" x="1391.5" y="994.0085">ALWAYS</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="112" x="1391.5" y="1012.6296">MATCHED_ONLY</text><line style="stroke:#D4AC0D;stroke-width:2.0;" x1="1386.5" x2="1531.5" y1="1020.1433" y2="1020.1433"/></g><!--MD5=[0929af63d3085909faf7f6bf84f6ab77]
class CardReaderEvent--><g id="elem_CardReaderEvent"><rect codeLine="89" fill="#FEFECE" height="103.8633" id="CardReaderEvent" rx="2.5" ry="2.5" style="stroke:#D4AC0D;stroke-width:2.0;" width="518" x="1416" y="1132.9011"/><ellipse cx="1608.75" cy="1148.9011" fill="#B4A7E5" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M1609.7031,1145.5417 L1609.7031,1152.198 L1611.4219,1152.198 Q1612.0313,1152.198 1612.2969,1152.4323 Q1612.5625,1152.6667 1612.5625,1153.0573 Q1612.5625,1153.4323 1612.2969,1153.6667 Q1612.0313,1153.9011 1611.4219,1153.9011 L1606.2813,1153.9011 Q1605.6719,1153.9011 1605.4063,1153.6667 Q1605.1406,1153.4323 1605.1406,1153.0417 Q1605.1406,1152.6667 1605.4063,1152.4323 Q1605.6719,1152.198 1606.2813,1152.198 L1608,1152.198 L1608,1145.5417 L1606.2813,1145.5417 Q1605.6719,1145.5417 1605.4063,1145.3073 Q1605.1406,1145.073 1605.1406,1144.6823 Q1605.1406,1144.3073 1605.4063,1144.073 Q1605.6719,1143.8386 1606.2813,1143.8386 L1611.4219,1143.8386 Q1612.0313,1143.8386 1612.2969,1144.073 Q1612.5625,1144.3073 1612.5625,1144.6823 Q1612.5625,1145.073 1612.2969,1145.3073 Q1612.0313,1145.5417 1611.4219,1145.5417 L1609.7031,1145.5417 Z " fill="#000000"/><ellipse cx="1634.25" cy="1148.4011" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="113" x="1640.25" y="1154.698">CardReaderEvent</text><line style="stroke:#D4AC0D;stroke-width:2.0;" x1="1417" x2="1933" y1="1164.9011" y2="1164.9011"/><line style="stroke:#D4AC0D;stroke-width:2.0;" x1="1417" x2="1933" y1="1172.9011" y2="1172.9011"/><ellipse cx="1427" cy="1187.7116" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="158" x="1436" y="1192.0085">String getReaderName ()</text><ellipse cx="1427" cy="1206.3327" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="102" x="1436" y="1210.6296">Type getType ()</text><ellipse cx="1427" cy="1224.9538" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="492" x="1436" y="1229.2507">ScheduledCardSelectionsResponse getScheduledCardSelectionsResponse ()</text></g><!--MD5=[8c5299a29afee59ed68e59a232a2321d]
class CardReaderEventType--><g id="elem_CardReaderEventType"><rect codeLine="94" fill="#FEFECE" height="122.4844" id="CardReaderEventType" rx="2.5" ry="2.5" style="stroke:#D4AC0D;stroke-width:2.0;" width="128" x="1610" y="1315.9011"/><ellipse cx="1648.85" cy="1331.9011" fill="#EB937F" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M1647.7094,1332.698 L1647.7094,1335.198 L1652.0375,1335.198 L1652.0375,1334.2761 Q1652.0375,1333.6667 1652.2719,1333.4011 Q1652.5219,1333.1355 1652.8969,1333.1355 Q1653.2719,1333.1355 1653.5063,1333.4011 Q1653.7406,1333.6667 1653.7406,1334.2761 L1653.7406,1336.9011 L1645.7406,1336.9011 Q1645.1156,1336.9011 1644.85,1336.6667 Q1644.6,1336.4323 1644.6,1336.0417 Q1644.6,1335.6667 1644.8656,1335.4323 Q1645.1313,1335.198 1645.7406,1335.198 L1646.0063,1335.198 L1646.0063,1328.5417 L1645.7406,1328.5417 Q1645.1156,1328.5417 1644.85,1328.3073 Q1644.6,1328.073 1644.6,1327.6823 Q1644.6,1327.3073 1644.85,1327.073 Q1645.1156,1326.8386 1645.7406,1326.8386 L1653.3656,1326.8386 L1653.3656,1329.4323 Q1653.3656,1330.0417 1653.1313,1330.3073 Q1652.9125,1330.5573 1652.5219,1330.5573 Q1652.1469,1330.5573 1651.9125,1330.3073 Q1651.6781,1330.0417 1651.6781,1329.4323 L1651.6781,1328.5417 L1647.7094,1328.5417 L1647.7094,1330.9948 L1649.1938,1330.9948 Q1649.1938,1330.3386 1649.3188,1330.1511 Q1649.5844,1329.7448 1650.0531,1329.7448 Q1650.4281,1329.7448 1650.6625,1330.0105 Q1650.8969,1330.2605 1650.8969,1330.8698 L1650.8969,1332.8386 Q1650.8969,1333.3855 1650.7719,1333.573 Q1650.5063,1333.9636 1650.0531,1333.9636 Q1649.5844,1333.9636 1649.3188,1333.5573 Q1649.1938,1333.3698 1649.1938,1332.698 L1647.7094,1332.698 Z " fill="#000000"/><ellipse cx="1673.15" cy="1331.4011" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="32" x="1679.15" y="1337.698">Type</text><line style="stroke:#D4AC0D;stroke-width:2.0;" x1="1611" x2="1737" y1="1347.9011" y2="1347.9011"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="115" x="1616" y="1367.0085">CARD_INSERTED</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="114" x="1616" y="1385.6296">CARD_MATCHED</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="116" x="1616" y="1404.2507">CARD_REMOVED</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="91" x="1616" y="1422.8718">UNAVAILABLE</text><line style="stroke:#D4AC0D;stroke-width:2.0;" x1="1611" x2="1737" y1="1430.3855" y2="1430.3855"/></g><!--MD5=[c890fc32568b07397f767fd1f5f57b26]
class CardReaderObserverSpi--><g id="elem_CardReaderObserverSpi"><rect codeLine="102" fill="#FEFECE" height="66.6211" id="CardReaderObserverSpi" rx="2.5" ry="2.5" style="stroke:#D4AC0D;stroke-width:2.0;" width="398" x="1568" y="951.9011"/><ellipse cx="1679.25" cy="967.9011" fill="#B4A7E5" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M1680.2031,964.5417 L1680.2031,971.198 L1681.9219,971.198 Q1682.5313,971.198 1682.7969,971.4323 Q1683.0625,971.6667 1683.0625,972.0573 Q1683.0625,972.4323 1682.7969,972.6667 Q1682.5313,972.9011 1681.9219,972.9011 L1676.7813,972.9011 Q1676.1719,972.9011 1675.9063,972.6667 Q1675.6406,972.4323 1675.6406,972.0417 Q1675.6406,971.6667 1675.9063,971.4323 Q1676.1719,971.198 1676.7813,971.198 L1678.5,971.198 L1678.5,964.5417 L1676.7813,964.5417 Q1676.1719,964.5417 1675.9063,964.3073 Q1675.6406,964.073 1675.6406,963.6823 Q1675.6406,963.3073 1675.9063,963.073 Q1676.1719,962.8386 1676.7813,962.8386 L1681.9219,962.8386 Q1682.5313,962.8386 1682.7969,963.073 Q1683.0625,963.3073 1683.0625,963.6823 Q1683.0625,964.073 1682.7969,964.3073 Q1682.5313,964.5417 1681.9219,964.5417 L1680.2031,964.5417 Z " fill="#000000"/><ellipse cx="1704.75" cy="967.4011" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="156" x="1710.75" y="973.698">CardReaderObserverSpi</text><line style="stroke:#D4AC0D;stroke-width:2.0;" x1="1569" x2="1965" y1="983.9011" y2="983.9011"/><line style="stroke:#D4AC0D;stroke-width:2.0;" x1="1569" x2="1965" y1="991.9011" y2="991.9011"/><ellipse cx="1579" cy="1006.7116" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="372" x="1588" y="1011.0085">void onReaderEvent (CardReaderEvent cardReaderEvent)</text></g><!--MD5=[006db6bb96001c5e4b016d87418574ed]
class CardReaderObservationExceptionHandlerSpi--><g id="elem_CardReaderObservationExceptionHandlerSpi"><rect codeLine="105" fill="#FEFECE" height="66.6211" id="CardReaderObservationExceptionHandlerSpi" rx="2.5" ry="2.5" style="stroke:#D4AC0D;stroke-width:2.0;" width="564" x="2001" y="951.9011"/><ellipse cx="2130.75" cy="967.9011" fill="#B4A7E5" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M2131.7031,964.5417 L2131.7031,971.198 L2133.4219,971.198 Q2134.0313,971.198 2134.2969,971.4323 Q2134.5625,971.6667 2134.5625,972.0573 Q2134.5625,972.4323 2134.2969,972.6667 Q2134.0313,972.9011 2133.4219,972.9011 L2128.2813,972.9011 Q2127.6719,972.9011 2127.4063,972.6667 Q2127.1406,972.4323 2127.1406,972.0417 Q2127.1406,971.6667 2127.4063,971.4323 Q2127.6719,971.198 2128.2813,971.198 L2130,971.198 L2130,964.5417 L2128.2813,964.5417 Q2127.6719,964.5417 2127.4063,964.3073 Q2127.1406,964.073 2127.1406,963.6823 Q2127.1406,963.3073 2127.4063,963.073 Q2127.6719,962.8386 2128.2813,962.8386 L2133.4219,962.8386 Q2134.0313,962.8386 2134.2969,963.073 Q2134.5625,963.3073 2134.5625,963.6823 Q2134.5625,964.073 2134.2969,964.3073 Q2134.0313,964.5417 2133.4219,964.5417 L2131.7031,964.5417 Z " fill="#000000"/><ellipse cx="2156.25" cy="967.4011" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="285" x="2162.25" y="973.698">CardReaderObservationExceptionHandlerSpi</text><line style="stroke:#D4AC0D;stroke-width:2.0;" x1="2002" x2="2564" y1="983.9011" y2="983.9011"/><line style="stroke:#D4AC0D;stroke-width:2.0;" x1="2002" x2="2564" y1="991.9011" y2="991.9011"/><ellipse cx="2012" cy="1006.7116" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="538" x="2021" y="1011.0085">void onReaderObservationError (String contextInfo, String readerName, Throwable e)</text></g><!--MD5=[7fedbe548ff6d9bf7b67b5fa43b6dc23]
class CardSelectionManager--><g id="elem_CardSelectionManager"><rect codeLine="114" fill="#FEFECE" height="271.4531" id="CardSelectionManager" rx="2.5" ry="2.5" style="stroke:#D4AC0D;stroke-width:2.0;" width="994" x="250" y="235.9011"/><ellipse cx="664.25" cy="251.9011" fill="#B4A7E5" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M665.2031,248.5417 L665.2031,255.198 L666.9219,255.198 Q667.5313,255.198 667.7969,255.4323 Q668.0625,255.6667 668.0625,256.0573 Q668.0625,256.4323 667.7969,256.6667 Q667.5313,256.9011 666.9219,256.9011 L661.7813,256.9011 Q661.1719,256.9011 660.9063,256.6667 Q660.6406,256.4323 660.6406,256.0417 Q660.6406,255.6667 660.9063,255.4323 Q661.1719,255.198 661.7813,255.198 L663.5,255.198 L663.5,248.5417 L661.7813,248.5417 Q661.1719,248.5417 660.9063,248.3073 Q660.6406,248.073 660.6406,247.6823 Q660.6406,247.3073 660.9063,247.073 Q661.1719,246.8386 661.7813,246.8386 L666.9219,246.8386 Q667.5313,246.8386 667.7969,247.073 Q668.0625,247.3073 668.0625,247.6823 Q668.0625,248.073 667.7969,248.3073 Q667.5313,248.5417 666.9219,248.5417 L665.2031,248.5417 Z " fill="#000000"/><ellipse cx="689.75" cy="251.4011" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="146" x="695.75" y="257.698">CardSelectionManager</text><line style="stroke:#D4AC0D;stroke-width:2.0;" x1="251" x2="1243" y1="267.9011" y2="267.9011"/><line style="stroke:#D4AC0D;stroke-width:2.0;" x1="251" x2="1243" y1="275.9011" y2="275.9011"/><ellipse cx="261" cy="290.7116" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="204" x="270" y="295.0085">void setMultipleSelectionMode ()</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4" x="270" y="313.6296"> </text><ellipse cx="261" cy="327.9538" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="320" x="270" y="332.2507">int prepareSelection (CardSelection cardSelection)</text><ellipse cx="261" cy="346.5749" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="199" x="270" y="350.8718">void prepareReleaseChannel ()</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4" x="270" y="369.4929"> </text><ellipse cx="261" cy="383.8171" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="239" x="270" y="388.114">String exportCardSelectionScenario ()</text><ellipse cx="261" cy="402.4382" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="400" x="270" y="406.7351">int importCardSelectionScenario (String cardSelectionScenario)</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4" x="270" y="425.3562"> </text><ellipse cx="261" cy="439.6804" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="499" x="270" y="443.9773">CardSelectionResult processCardSelectionScenario (CardReader cardReader)</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4" x="270" y="462.5984"> </text><ellipse cx="261" cy="476.9226" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="968" x="270" y="481.2195">void scheduleCardSelectionScenario (ObservableCardReader observableCardReader, DetectionMode detectionMode, NotificationMode notificationMode)</text><ellipse cx="261" cy="495.5437" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="866" x="270" y="499.8405">CardSelectionResult parseScheduledCardSelectionsResponse (ScheduledCardSelectionsResponse scheduledCardSelectionsResponse)</text></g><!--MD5=[b048fcdbdb6b9f6911c1d2807b5ba439]
class CardSelectionResult--><g id="elem_CardSelectionResult"><rect codeLine="138" fill="#FEFECE" height="103.8633" id="CardSelectionResult" rx="2.5" ry="2.5" style="stroke:#D4AC0D;stroke-width:2.0;" width="302" x="46" y="650.9011"/><ellipse cx="122.75" cy="666.9011" fill="#B4A7E5" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M123.7031,663.5417 L123.7031,670.198 L125.4219,670.198 Q126.0313,670.198 126.2969,670.4323 Q126.5625,670.6667 126.5625,671.0573 Q126.5625,671.4323 126.2969,671.6667 Q126.0313,671.9011 125.4219,671.9011 L120.2813,671.9011 Q119.6719,671.9011 119.4063,671.6667 Q119.1406,671.4323 119.1406,671.0417 Q119.1406,670.6667 119.4063,670.4323 Q119.6719,670.198 120.2813,670.198 L122,670.198 L122,663.5417 L120.2813,663.5417 Q119.6719,663.5417 119.4063,663.3073 Q119.1406,663.073 119.1406,662.6823 Q119.1406,662.3073 119.4063,662.073 Q119.6719,661.8386 120.2813,661.8386 L125.4219,661.8386 Q126.0313,661.8386 126.2969,662.073 Q126.5625,662.3073 126.5625,662.6823 Q126.5625,663.073 126.2969,663.3073 Q126.0313,663.5417 125.4219,663.5417 L123.7031,663.5417 Z " fill="#000000"/><ellipse cx="148.25" cy="666.4011" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="129" x="154.25" y="672.698">CardSelectionResult</text><line style="stroke:#D4AC0D;stroke-width:2.0;" x1="47" x2="347" y1="682.9011" y2="682.9011"/><line style="stroke:#D4AC0D;stroke-width:2.0;" x1="47" x2="347" y1="690.9011" y2="690.9011"/><ellipse cx="57" cy="705.7116" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="276" x="66" y="710.0085">Map&lt;Integer, SmartCard&gt; getSmartCards ()</text><ellipse cx="57" cy="724.3327" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="212" x="66" y="728.6296">SmartCard getActiveSmartCard ()</text><ellipse cx="57" cy="742.9538" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="182" x="66" y="747.2507">int getActiveSelectionIndex ()</text></g><!--MD5=[0fbebdc936aa14b829c88e48b951a711]
class ScheduledCardSelectionsResponse--><g id="elem_ScheduledCardSelectionsResponse"><rect codeLine="143" fill="#FEFECE" height="48" id="ScheduledCardSelectionsResponse" rx="2.5" ry="2.5" style="stroke:#D4AC0D;stroke-width:2.0;" width="270" x="974" y="678.9011"/><ellipse cx="989" cy="694.9011" fill="#B4A7E5" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M989.9531,691.5417 L989.9531,698.198 L991.6719,698.198 Q992.2813,698.198 992.5469,698.4323 Q992.8125,698.6667 992.8125,699.0573 Q992.8125,699.4323 992.5469,699.6667 Q992.2813,699.9011 991.6719,699.9011 L986.5313,699.9011 Q985.9219,699.9011 985.6563,699.6667 Q985.3906,699.4323 985.3906,699.0417 Q985.3906,698.6667 985.6563,698.4323 Q985.9219,698.198 986.5313,698.198 L988.25,698.198 L988.25,691.5417 L986.5313,691.5417 Q985.9219,691.5417 985.6563,691.3073 Q985.3906,691.073 985.3906,690.6823 Q985.3906,690.3073 985.6563,690.073 Q985.9219,689.8386 986.5313,689.8386 L991.6719,689.8386 Q992.2813,689.8386 992.5469,690.073 Q992.8125,690.3073 992.8125,690.6823 Q992.8125,691.073 992.5469,691.3073 Q992.2813,691.5417 991.6719,691.5417 L989.9531,691.5417 Z " fill="#000000"/><ellipse cx="1008" cy="694.4011" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="227" x="1014" y="700.698">ScheduledCardSelectionsResponse</text><line style="stroke:#D4AC0D;stroke-width:2.0;" x1="975" x2="1243" y1="710.9011" y2="710.9011"/><line style="stroke:#D4AC0D;stroke-width:2.0;" x1="975" x2="1243" y1="718.9011" y2="718.9011"/></g><!--MD5=[01b70d0a2359744fc21c39698f2f9070]
class InvalidCardResponseException--><g id="elem_InvalidCardResponseException"><rect codeLine="146" fill="#FEFECE" height="100.4844" id="InvalidCardResponseException" rx="2.5" ry="2.5" style="stroke:#D4AC0D;stroke-width:2.0;" width="450" x="489" y="652.9011"/><ellipse cx="606.25" cy="676.5222" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M609.0156,672.3972 Q609.1719,672.1784 609.3594,672.0691 Q609.5469,671.9597 609.7656,671.9597 Q610.1406,671.9597 610.375,672.2253 Q610.6094,672.4753 610.6094,673.0847 L610.6094,674.5378 Q610.6094,675.1472 610.375,675.4128 Q610.1406,675.6784 609.7656,675.6784 Q609.4219,675.6784 609.2188,675.4753 Q609.0156,675.2878 608.9063,674.7722 Q608.8594,674.4128 608.6719,674.2253 Q608.3438,673.8503 607.7344,673.6316 Q607.125,673.4128 606.5,673.4128 Q605.7344,673.4128 605.0938,673.7409 Q604.4688,674.0691 603.9688,674.8191 Q603.4844,675.5691 603.4844,676.6003 L603.4844,677.6941 Q603.4844,678.9284 604.375,679.7566 Q605.2656,680.5691 606.8594,680.5691 Q607.7969,680.5691 608.4531,680.3191 Q608.8438,680.1628 609.2656,679.7253 Q609.5313,679.4597 609.6719,679.3816 Q609.8281,679.3034 610.0313,679.3034 Q610.3594,679.3034 610.6094,679.5691 Q610.875,679.8191 610.875,680.1628 Q610.875,680.5066 610.5313,680.9128 Q610.0313,681.4909 609.2344,681.8191 Q608.1563,682.2722 606.8594,682.2722 Q605.3438,682.2722 604.1406,681.6472 Q603.1563,681.1472 602.4688,680.0847 Q601.7813,679.0066 601.7813,677.7253 L601.7813,676.5691 Q601.7813,675.2409 602.3906,674.1003 Q603.0156,672.9441 604.1094,672.3347 Q605.2031,671.7097 606.4375,671.7097 Q607.1719,671.7097 607.8125,671.8816 Q608.4688,672.0378 609.0156,672.3972 Z " fill="#000000"/><ellipse cx="631.75" cy="676.0222" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="129" x="671.25" y="673.0085">«RuntimeException»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="196" x="637.75" y="691.6296">InvalidCardResponseException</text><line style="stroke:#D4AC0D;stroke-width:2.0;" x1="490" x2="938" y1="700.1433" y2="700.1433"/><line style="stroke:#D4AC0D;stroke-width:2.0;" x1="490" x2="938" y1="708.1433" y2="708.1433"/><ellipse cx="500" cy="722.9538" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="308" x="509" y="727.2507">InvalidCardResponseException (String message)</text><ellipse cx="500" cy="741.5749" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="424" x="509" y="745.8718">InvalidCardResponseException (String message, Throwable cause)</text></g><!--MD5=[47f0011813555fb489a606ff84d44b55]
class CardSelection--><g id="elem_CardSelection"><rect codeLine="131" fill="#FEFECE" height="48" id="CardSelection" rx="2.5" ry="2.5" style="stroke:#D4AC0D;stroke-width:2.0;" width="132" x="377" y="961.4011"/><ellipse cx="392" cy="977.4011" fill="#B4A7E5" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M392.9531,974.0417 L392.9531,980.698 L394.6719,980.698 Q395.2813,980.698 395.5469,980.9323 Q395.8125,981.1667 395.8125,981.5573 Q395.8125,981.9323 395.5469,982.1667 Q395.2813,982.4011 394.6719,982.4011 L389.5313,982.4011 Q388.9219,982.4011 388.6563,982.1667 Q388.3906,981.9323 388.3906,981.5417 Q388.3906,981.1667 388.6563,980.9323 Q388.9219,980.698 389.5313,980.698 L391.25,980.698 L391.25,974.0417 L389.5313,974.0417 Q388.9219,974.0417 388.6563,973.8073 Q388.3906,973.573 388.3906,973.1823 Q388.3906,972.8073 388.6563,972.573 Q388.9219,972.3386 389.5313,972.3386 L394.6719,972.3386 Q395.2813,972.3386 395.5469,972.573 Q395.8125,972.8073 395.8125,973.1823 Q395.8125,973.573 395.5469,973.8073 Q395.2813,974.0417 394.6719,974.0417 L392.9531,974.0417 Z " fill="#000000"/><ellipse cx="411" cy="976.9011" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="89" x="417" y="983.198">CardSelection</text><line style="stroke:#D4AC0D;stroke-width:2.0;" x1="378" x2="508" y1="993.4011" y2="993.4011"/><line style="stroke:#D4AC0D;stroke-width:2.0;" x1="378" x2="508" y1="1001.4011" y2="1001.4011"/></g><!--MD5=[4d4351d1dd1d596b03b4778d9849998b]
class SmartCard--><g id="elem_SmartCard"><rect codeLine="133" fill="#FEFECE" height="85.2422" id="SmartCard" rx="2.5" ry="2.5" style="stroke:#D4AC0D;stroke-width:2.0;" width="271" x="70.5" y="942.9011"/><ellipse cx="162.25" cy="958.9011" fill="#B4A7E5" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M163.2031,955.5417 L163.2031,962.198 L164.9219,962.198 Q165.5313,962.198 165.7969,962.4323 Q166.0625,962.6667 166.0625,963.0573 Q166.0625,963.4323 165.7969,963.6667 Q165.5313,963.9011 164.9219,963.9011 L159.7813,963.9011 Q159.1719,963.9011 158.9063,963.6667 Q158.6406,963.4323 158.6406,963.0417 Q158.6406,962.6667 158.9063,962.4323 Q159.1719,962.198 159.7813,962.198 L161.5,962.198 L161.5,955.5417 L159.7813,955.5417 Q159.1719,955.5417 158.9063,955.3073 Q158.6406,955.073 158.6406,954.6823 Q158.6406,954.3073 158.9063,954.073 Q159.1719,953.8386 159.7813,953.8386 L164.9219,953.8386 Q165.5313,953.8386 165.7969,954.073 Q166.0625,954.3073 166.0625,954.6823 Q166.0625,955.073 165.7969,955.3073 Q165.5313,955.5417 164.9219,955.5417 L163.2031,955.5417 Z " fill="#000000"/><ellipse cx="187.75" cy="958.4011" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="68" x="193.75" y="964.698">SmartCard</text><line style="stroke:#D4AC0D;stroke-width:2.0;" x1="71.5" x2="340.5" y1="974.9011" y2="974.9011"/><line style="stroke:#D4AC0D;stroke-width:2.0;" x1="71.5" x2="340.5" y1="982.9011" y2="982.9011"/><ellipse cx="81.5" cy="997.7116" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="163" x="90.5" y="1002.0085">String getPowerOnData ()</text><ellipse cx="81.5" cy="1016.3327" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="245" x="90.5" y="1020.6296">byte[] getSelectApplicationResponse ()</text></g><!--MD5=[a8c5704f10936d956c5ecd531800e156]
reverse link CardReader to ConfigurableCardReader--><g id="link_CardReader_ConfigurableCardReader"><path d="M2007.16,423.4111 C2141.94,485.2711 2367.77,588.9031 2502.65,650.7991 " fill="none" id="CardReader-backto-ConfigurableCardReader" style="stroke:#181818;stroke-width:2.0;"/><polygon fill="none" points="2004.02,429.6711,1988.76,414.9711,2009.86,416.9511,2004.02,429.6711" style="stroke:#181818;stroke-width:2.0;"/></g><!--MD5=[40362253147766c9c743cec65354f353]
reverse link CardReader to ObservableCardReader--><g id="link_CardReader_ObservableCardReader"><path d="M1908.51,443.4411 C1915.81,484.9211 1925.2,538.2691 1933.55,585.7161 " fill="none" id="CardReader-backto-ObservableCardReader" style="stroke:#181818;stroke-width:2.0;"/><polygon fill="none" points="1901.57,444.4311,1905,423.5211,1915.36,442.0111,1901.57,444.4311" style="stroke:#181818;stroke-width:2.0;"/></g><!--MD5=[102e1d884686006ef209cb8bf85fc641]
reverse link ObservableCardReader to NotificationMode--><g id="link_ObservableCardReader_NotificationMode"><path codeLine="169" d="M1631.04,827.0421 C1603.39,842.2621 1576.61,858.8831 1552,876.9011 C1527.21,895.0511 1504.54,920.9731 1487.78,942.8141 " fill="none" id="ObservableCardReader-backto-NotificationMode" style="stroke:#181818;stroke-width:2.0;"/><ellipse cx="1637.2109" cy="823.7185" fill="#FFFFFF" rx="8" ry="8" style="stroke:#181818;stroke-width:2.0;"/><line style="stroke:#181818;stroke-width:2.0;" x1="1630.1718" x2="1644.25" y1="827.5199" y2="819.9171"/><line style="stroke:#181818;stroke-width:2.0;" x1="1633.4095" x2="1641.0123" y1="816.6794" y2="830.7576"/></g><!--MD5=[66154b3cafeacecd1e2cf8a5b4606cfa]
link DetectionMode to ObservableCardReader--><g id="link_DetectionMode_ObservableCardReader"><path codeLine="170" d="M1523.19,705.3901 C1531.05,705.6001 1538.95,705.7791 1546.5,705.9011 C1556.94,706.0701 1559.56,705.9421 1570,705.9011 C1572.79,705.8901 1575.58,705.8791 1578.39,705.8671 " fill="none" id="DetectionMode-to-ObservableCardReader" style="stroke:#181818;stroke-width:2.0;"/><ellipse cx="1585.4901" cy="705.8306" fill="#FFFFFF" rx="8" ry="8" style="stroke:#181818;stroke-width:2.0;"/><line style="stroke:#181818;stroke-width:2.0;" x1="1577.4901" x2="1593.49" y1="705.861" y2="705.8001"/><line style="stroke:#181818;stroke-width:2.0;" x1="1585.4596" x2="1585.5205" y1="697.8306" y2="713.8305"/></g><!--MD5=[dbbe3a95d6beb8e83c2ba54b40633429]
reverse link DetectionMode to ObservableCardReader--><g id="link_DetectionMode_ObservableCardReader"><path codeLine="171" d="M1528.61,702.9011 C1547.83,702.9011 1569.84,702.9011 1593.5,702.9011 " fill="none" id="DetectionMode-backto-ObservableCardReader" style="stroke:#27AE60;stroke-width:2.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#27AE60" points="1523.26,702.9011,1532.26,706.9011,1528.26,702.9011,1532.26,698.9011,1523.26,702.9011" style="stroke:#27AE60;stroke-width:2.0;"/><polygon fill="#000000" points="1540.25,690.5466,1549.2951,693.4855,1549.2951,687.6077,1540.25,690.5466" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="21" x="1554.25" y="695.9294">use</text></g><!--MD5=[f1012a22e38ec6ba8ebae710b6ed7740]
link ObservableCardReader to CardReaderObservationExceptionHandlerSpi--><g id="link_ObservableCardReader_CardReaderObservationExceptionHandlerSpi"><path codeLine="172" d="M2090.19,820.0161 C2144.26,866.1141 2202.54,915.7981 2240.7,948.3341 " fill="none" id="ObservableCardReader-to-CardReaderObservationExceptionHandlerSpi" style="stroke:#27AE60;stroke-width:2.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#27AE60" points="2244.79,951.8211,2240.5356,942.9385,2240.9849,948.5775,2235.3459,949.0267,2244.79,951.8211" style="stroke:#27AE60;stroke-width:2.0;"/><polygon fill="#000000" points="2146.8049,862.7905,2141.8285,854.6858,2138.0151,859.1587,2146.8049,862.7905" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="21" x="2152" y="864.9294">use</text></g><!--MD5=[340f8b1fa6e5f55e3decc3d0782fe370]
reverse link CardReaderEvent to CardReaderEventType--><g id="link_CardReaderEvent_CardReaderEventType"><path codeLine="174" d="M1660.84,1252.0511 C1660.11,1257.0601 1659.47,1262.0511 1659,1266.9011 C1657.45,1282.7751 1658.5,1299.8901 1660.63,1315.7481 " fill="none" id="CardReaderEvent-backto-CardReaderEventType" style="stroke:#181818;stroke-width:2.0;"/><ellipse cx="1662.0112" cy="1244.9883" fill="#FFFFFF" rx="8" ry="8" style="stroke:#181818;stroke-width:2.0;"/><line style="stroke:#181818;stroke-width:2.0;" x1="1660.7025" x2="1663.32" y1="1252.8805" y2="1237.0961"/><line style="stroke:#181818;stroke-width:2.0;" x1="1654.119" x2="1669.9035" y1="1243.6795" y2="1246.2971"/></g><!--MD5=[ea5d4584d91c2420faebe0edaa35dd07]
link CardReaderEvent to CardReaderEventType--><g id="link_CardReaderEvent_CardReaderEventType"><path codeLine="175" d="M1674.73,1237.0671 C1674.61,1259.7451 1674.47,1286.6911 1674.34,1310.7821 " fill="none" id="CardReaderEvent-to-CardReaderEventType" style="stroke:#3498DB;stroke-width:2.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#3498DB" points="1674.32,1315.8771,1678.3662,1306.8978,1674.3457,1310.8772,1670.3663,1306.8566,1674.32,1315.8771" style="stroke:#3498DB;stroke-width:2.0;"/><polygon fill="#000000" points="1678.9735,1281.5465,1681.9603,1272.5171,1676.0825,1272.486,1678.9735,1281.5465" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="40" x="1688" y="1281.9294">provide</text></g><!--MD5=[288fe8b4bb69e8cb3939b387d62d61fe]
reverse link ScheduledCardSelectionsResponse to CardReaderEvent--><g id="link_ScheduledCardSelectionsResponse_CardReaderEvent"><path codeLine="176" d="M1116.45,732.3361 C1136.16,801.8561 1196.3,981.6111 1313,1075.9011 C1343.23,1100.3221 1378.85,1119.2241 1415.76,1133.8531 " fill="none" id="ScheduledCardSelectionsResponse-backto-CardReaderEvent" style="stroke:#3498DB;stroke-width:2.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#3498DB" points="1115,727.1311,1113.5759,736.8764,1116.3487,731.9458,1121.2794,734.7186,1115,727.1311" style="stroke:#3498DB;stroke-width:2.0;"/><polygon fill="#000000" points="1315.0117,981.5379,1318.0613,990.5462,1322.7739,987.0333,1315.0117,981.5379" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="40" x="1327" y="990.9294">provide</text></g><!--MD5=[ec53f9149eb0a5572ddbd98e132e34ec]
link CardSelectionResult to SmartCard--><g id="link_CardSelectionResult_SmartCard"><path codeLine="178" d="M198.64,755.0231 C200.312,807.1181 202.882,887.2271 204.501,937.6751 " fill="none" id="CardSelectionResult-to-SmartCard" style="stroke:#3498DB;stroke-width:2.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#3498DB" points="204.664,942.7651,208.3739,933.6417,204.504,937.7677,200.378,933.8977,204.664,942.7651" style="stroke:#3498DB;stroke-width:2.0;"/><polygon fill="#000000" points="208.1604,864.544,210.8077,855.4093,204.9329,855.5979,208.1604,864.544" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="40" x="217" y="864.9294">provide</text></g><!--MD5=[4e76f4d88bc0a2d674e5b83abfcdfa28]
link CardSelectionManager to CardSelection--><g id="link_CardSelectionManager_CardSelection"><path codeLine="180" d="M496.89,507.2391 C472.179,530.2661 450.539,556.4381 435,585.9011 C369.559,709.9781 412.776,887.4321 433.6,955.9241 " fill="none" id="CardSelectionManager-to-CardSelection" style="stroke:#27AE60;stroke-width:2.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#27AE60" points="435.18,961.0531,436.3535,951.2744,433.7082,956.2746,428.7079,953.6293,435.18,961.0531" style="stroke:#27AE60;stroke-width:2.0;"/><polygon fill="#000000" points="439.3016,707.9976,443.4751,699.4517,437.6549,698.6307,439.3016,707.9976" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="21" x="449" y="708.4294">use</text></g><!--MD5=[eca09f4198ea9093719c3216b0b2e695]
link CardSelectionManager to ScheduledCardSelectionsResponse--><g id="link_CardSelectionManager_ScheduledCardSelectionsResponse"><path codeLine="181" d="M895.023,507.1341 C963.918,569.8441 1039.41,638.5601 1079.73,675.2631 " fill="none" id="CardSelectionManager-to-ScheduledCardSelectionsResponse" style="stroke:#27AE60;stroke-width:2.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#27AE60" points="1083.53,678.7141,1079.5751,669.6942,1079.8355,675.345,1074.1846,675.6054,1083.53,678.7141" style="stroke:#27AE60;stroke-width:2.0;"/><polygon fill="#000000" points="947.6976,549.9123,942.9869,541.6503,939.0303,545.9971,947.6976,549.9123" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="21" x="953" y="551.9294">use</text></g><!--MD5=[49f67eafe7b04eace454d2c0c91af031]
link CardSelectionManager to CardSelectionResult--><g id="link_CardSelectionManager_CardSelectionResult"><path codeLine="182" d="M401.211,507.1591 C384.907,516.5981 369.074,526.5141 354,536.9011 C310.04,567.1911 268.78,611.4251 239.599,646.4701 " fill="none" id="CardSelectionManager-to-CardSelectionResult" style="stroke:#3498DB;stroke-width:2.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#3498DB" points="236.101,650.6971,244.9215,646.3154,239.2895,646.8457,238.7593,641.2138,236.101,650.6971" style="stroke:#3498DB;stroke-width:2.0;"/><polygon fill="#000000" points="355.2128,549.8112,363.9827,546.1315,360.145,541.6795,355.2128,549.8112" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="40" x="368" y="551.9294">provide</text></g><!--MD5=[8b80a861e2ead4cbc046e22ed79fe254]
link CardSelectionManager to CardReader--><g id="link_CardSelectionManager_CardReader"><path codeLine="183" d="M987.659,235.8811 C1192.84,139.5111 1491.28,45.6211 1728,159.9011 C1794,191.7611 1842.03,263.5411 1869.43,314.6311 " fill="none" id="CardSelectionManager-to-CardReader" style="stroke:#27AE60;stroke-width:2.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#27AE60" points="1871.85,319.2011,1871.1639,309.3762,1869.506,314.7846,1864.0975,313.1266,1871.85,319.2011" style="stroke:#27AE60;stroke-width:2.0;"/><polygon fill="#000000" points="1515.9802,107.9914,1507.2324,104.2595,1506.7095,110.114,1515.9802,107.9914" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="21" x="1520" y="112.9294">use</text></g><!--MD5=[4bfc324fd34bdcdca92028c8c160427f]
link CardSelectionManager to NotificationMode--><g id="link_CardSelectionManager_NotificationMode"><path codeLine="184" d="M1166.43,506.9701 C1201.34,529.4611 1233.66,555.5851 1261,585.9011 C1333.71,666.5101 1280.92,723.5881 1331,819.9011 C1345.89,848.5381 1356.14,851.4601 1376,876.9011 C1391.72,897.0301 1408.99,919.3691 1423.69,938.4451 " fill="none" id="CardSelectionManager-to-NotificationMode" style="stroke:#27AE60;stroke-width:2.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#27AE60" points="1426.98,942.7151,1424.6684,933.1413,1423.9337,938.7503,1418.3247,938.0155,1426.98,942.7151" style="stroke:#27AE60;stroke-width:2.0;"/><polygon fill="#000000" points="1338.5606,707.3412,1336.4527,698.0671,1331.4042,701.0773,1338.5606,707.3412" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="21" x="1345" y="708.4294">use</text></g><!--MD5=[8e99f00a1ff5326dab1fccc039630f0e]
link CardSelectionManager to DetectionMode--><g id="link_CardSelectionManager_DetectionMode"><path codeLine="185" d="M1244.06,491.8811 C1271.6,505.3381 1298.14,520.2921 1323,536.9011 C1368.45,567.2621 1405.47,618.3951 1428.42,655.7081 " fill="none" id="CardSelectionManager-to-DetectionMode" style="stroke:#27AE60;stroke-width:2.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#27AE60" points="1431.15,660.1871,1429.8849,650.4198,1428.5492,655.9167,1423.0523,654.5811,1431.15,660.1871" style="stroke:#27AE60;stroke-width:2.0;"/><polygon fill="#000000" points="1354.7375,549.8679,1349.9285,541.6628,1346.0241,546.0565,1354.7375,549.8679" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="21" x="1360" y="551.9294">use</text></g><!--MD5=[ecafc35f2e69f11a41899fd2d6bff697]
link CardSelectionManager to InvalidCardResponseException--><g id="link_CardSelectionManager_InvalidCardResponseException"><path codeLine="186" d="M733.482,507.3721 C728.559,556.5281 723.27,609.3421 719.447,647.5181 " fill="none" id="CardSelectionManager-to-InvalidCardResponseException" style="stroke:#3498DB;stroke-width:2.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#3498DB" points="718.941,652.5701,723.8162,644.0125,719.4382,647.5949,715.8559,643.2169,718.941,652.5701" style="stroke:#3498DB;stroke-width:2.0;"/><polygon fill="#000000" points="735.5018,551.5217,739.3274,542.8145,733.4788,542.2288,735.5018,551.5217" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="31" x="745" y="551.9294">throw</text></g><!--MD5=[769bf36c235d3c29e1ab536906ddc491]
link ObservableCardReader to CardReaderObserverSpi--><g id="link_ObservableCardReader_CardReaderObserverSpi"><path codeLine="188" d="M1876.59,820.0161 C1846.11,865.7401 1813.27,914.9941 1791.57,947.5401 " fill="none" id="ObservableCardReader-to-CardReaderObserverSpi" style="stroke:#27AE60;stroke-width:2.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#27AE60" points="1788.72,951.8211,1797.0418,946.5534,1791.4945,947.6615,1790.3864,942.1142,1788.72,951.8211" style="stroke:#27AE60;stroke-width:2.0;"/><polygon fill="#000000" points="1856.2264,863.7068,1863.6892,857.8112,1858.7986,854.5507,1856.2264,863.7068" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="21" x="1868" y="864.9294">use</text></g><!--MD5=[80beeb8e7435df23c483fb097999290c]
link CardReaderObserverSpi to CardReaderEvent--><g id="link_CardReaderObserverSpi_CardReaderEvent"><path codeLine="190" d="M1751.81,1019.0141 C1738.03,1048.5831 1717.44,1092.7931 1701.04,1127.9941 " fill="none" id="CardReaderObserverSpi-to-CardReaderEvent" style="stroke:#27AE60;stroke-width:2.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#27AE60" points="1698.86,1132.6791,1706.2885,1126.2124,1700.9729,1128.1474,1699.0378,1122.8318,1698.86,1132.6791" style="stroke:#27AE60;stroke-width:2.0;"/><polygon fill="#000000" points="1723.8886,1098.0789,1730.3722,1091.121,1725.0442,1088.6388,1723.8886,1098.0789" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="21" x="1735" y="1098.9294">use</text></g><!--MD5=[1eb259ccd641d78a15a582c900274490]
link SmartCard to ReaderProtocolNotSupportedException--><!--MD5=[21fcee3fe490d347e3ecc9417572c91b]
link ReaderProtocolNotSupportedException to ReaderCommunicationException--><!--MD5=[a1e51d2b42def1ea2068c5bed5dda84c]
link ReaderCommunicationException to CardCommunicationException--><!--MD5=[fb8809311dea13578389ffb4d8d3cbd0]
@startuml
title
    Calypsonet - calypsonet-terminal-reader-java-api - 1.2.+ (10/01/2023)
end title

' == THEME ==

'Couleurs issues de : https://htmlcolorcodes.com/fr/tableau-de-couleur/tableau-de-couleur-design-plat/
!define C_GREY1 F8F9F9
!define C_GREY2 F2F3F4
!define C_GREY3 E5E7E9
!define C_GREY4 D7DBDD
!define C_GREY5 CACFD2
!define C_GREY6 BDC3C7
!define C_LINK 3498DB
!define C_USE 27AE60

' - - Styles that don't work with new version of plantuml - -
skinparam stereotypeABorderColor #A9DCDF
skinparam stereotypeIBorderColor #B4A7E5
skinparam stereotypeCBorderColor #ADD1B2
skinparam stereotypeEBorderColor #EB93DF
' - - END - -

skinparam ClassBorderThickness 2
skinparam ArrowThickness 2

' Yellow
skinparam ClassBackgroundColor #FEFECE
skinparam ClassBorderColor #D4AC0D
' Red
skinparam ClassBackgroundColor<<red>> #FDEDEC
skinparam ClassBorderColor<<red>> #E74C3C
hide <<red>> stereotype
' Purple
skinparam ClassBackgroundColor<<purple>> #F4ECF7
skinparam ClassBorderColor<<purple>> #8E44AD
hide <<purple>> stereotype
' blue
skinparam ClassBackgroundColor<<blue>> #EBF5FB
skinparam ClassBorderColor<<blue>> #3498DB
hide <<blue>> stereotype
' Green
skinparam ClassBackgroundColor<<green>> #E9F7EF
skinparam ClassBorderColor<<green>> #27AE60
hide <<green>> stereotype
' Grey
skinparam ClassBackgroundColor<<grey>> #EAECEE
skinparam ClassBorderColor<<grey>> #2C3E50
hide <<grey>> stereotype

' == CONTENT ==

package "org.calypsonet.terminal.reader" as readerApi {
    ' SERVICE
    together {
        +class "**final** ReaderApiProperties" as ApiProperties {
            +{static} **final** String VERSION
        }
        +interface CardReader {
            +String getName ()
            +boolean isContactless ()
            +boolean isCardPresent ()
        }
        +interface ConfigurableCardReader extends CardReader {
            +void activateProtocol (String logicalProtocolName, String physicalProtocolName)
            +void deactivateProtocol (String logicalProtocolName)
            +String getCurrentProtocol ()
        }
        +interface ObservableCardReader extends CardReader {
            +void setReaderObservationExceptionHandler (CardReaderObservationExceptionHandlerSpi exceptionHandler)

            +void addObserver (CardReaderObserverSpi observer)
            +void removeObserver (CardReaderObserverSpi observer)
            +void clearObservers ()
            +int countObservers ()

            +void startCardDetection (DetectionMode detectionMode)
            +void stopCardDetection ()
            +void finalizeCardProcessing ()
        }
        +enum DetectionMode {
            REPEATING
            SINGLESHOT
        }
        +enum NotificationMode {
            ALWAYS
            MATCHED_ONLY
        }
        +interface CardReaderEvent {
            +String getReaderName ()
            +Type getType ()
            +ScheduledCardSelectionsResponse getScheduledCardSelectionsResponse ()
        }
        +enum "Type" as CardReaderEventType {
            CARD_INSERTED
            CARD_MATCHED
            CARD_REMOVED
            UNAVAILABLE
        }
        ' SPI
        package "spi" as readerSpi {
            +interface CardReaderObserverSpi {
                +void onReaderEvent (CardReaderEvent cardReaderEvent)
            }
            +interface CardReaderObservationExceptionHandlerSpi {
                +void onReaderObservationError (String contextInfo, String readerName, Throwable e)
            }
        }
    }

    ' SELECTION
    package "selection" as selectionApi {
        ' Selection
        +interface CardSelectionManager {
            +void setMultipleSelectionMode ()

            +int prepareSelection (CardSelection cardSelection)
            +void prepareReleaseChannel ()

            +String exportCardSelectionScenario ()
            +int importCardSelectionScenario (String cardSelectionScenario)

            +CardSelectionResult processCardSelectionScenario (CardReader cardReader)

            +void scheduleCardSelectionScenario (ObservableCardReader observableCardReader, DetectionMode detectionMode, NotificationMode notificationMode)
            +CardSelectionResult parseScheduledCardSelectionsResponse (ScheduledCardSelectionsResponse scheduledCardSelectionsResponse)
        }

        ' Card Extension SPI
        package "spi" as selectionSpi {
            +interface CardSelection {
            }
            +interface "SmartCard" as SmartCard {
                +String getPowerOnData ()
                +byte[] getSelectApplicationResponse ()
            }
        }
        +interface CardSelectionResult {
            +Map<Integer, SmartCard> getSmartCards ()
            +SmartCard getActiveSmartCard ()
            +int getActiveSelectionIndex ()
        }
        +interface ScheduledCardSelectionsResponse {
        }

        +class "<<RuntimeException>>\nInvalidCardResponseException" as InvalidCardResponseException {
            +InvalidCardResponseException (String message)
            +InvalidCardResponseException (String message, Throwable cause)
        }
    }
    ' EXCEPTIONS
    'together {
        +class "<<RuntimeException>>\nReaderCommunicationException" as ReaderCommunicationException {
            +ReaderCommunicationException (String message)
            +ReaderCommunicationException (String message, Throwable cause)
        }
        +class "<<RuntimeException>>\nReaderProtocolNotSupportedException" as ReaderProtocolNotSupportedException {
            +ReaderProtocolNotSupportedException (String physicalProtocolName)
        }
        +class "<<RuntimeException>>\nCardCommunicationException" as CardCommunicationException {
            +CardCommunicationException (String message)
            +CardCommunicationException (String message, Throwable cause)
        }
    '}
}

' Associations

ObservableCardReader +- - NotificationMode
ObservableCardReader +-left- DetectionMode
ObservableCardReader .left.> DetectionMode #C_USE : use >
ObservableCardReader ..> CardReaderObservationExceptionHandlerSpi #C_USE : use >

CardReaderEvent +- - CardReaderEventType
CardReaderEvent ..> CardReaderEventType #C_LINK : provide >
CardReaderEvent .up.> ScheduledCardSelectionsResponse #C_LINK : provide >

CardSelectionResult ..> SmartCard #C_LINK : provide >

CardSelectionManager ..> CardSelection #C_USE : use >
CardSelectionManager ..> ScheduledCardSelectionsResponse #C_USE : use >
CardSelectionManager ..> CardSelectionResult #C_LINK : provide >
CardSelectionManager .right.> CardReader #C_USE : use >
CardSelectionManager ..> NotificationMode #C_USE : use >
CardSelectionManager ..> DetectionMode #C_USE : use >
CardSelectionManager ..> InvalidCardResponseException #C_LINK : throw >

ObservableCardReader ..> CardReaderObserverSpi #C_USE : use >

CardReaderObserverSpi ..> CardReaderEvent #C_USE : use >

' == LAYOUT ==

SmartCard -[hidden]- ReaderProtocolNotSupportedException
ReaderProtocolNotSupportedException -[hidden]- ReaderCommunicationException
ReaderCommunicationException -[hidden]right- CardCommunicationException

' == STYLE ==

package readerApi #C_GREY1 {}
package readerSpi #C_GREY2 {}
package selectionApi #C_GREY2 {}
package selectionSpi #C_GREY3 {}

@enduml

@startuml
title
    Calypsonet - calypsonet-terminal-reader-java-api - 1.2.+ (10/01/2023)
end title



skinparam stereotypeABorderColor #A9DCDF
skinparam stereotypeIBorderColor #B4A7E5
skinparam stereotypeCBorderColor #ADD1B2
skinparam stereotypeEBorderColor #EB93DF

skinparam ClassBorderThickness 2
skinparam ArrowThickness 2

skinparam ClassBackgroundColor #FEFECE
skinparam ClassBorderColor #D4AC0D
skinparam ClassBackgroundColor<<red>> #FDEDEC
skinparam ClassBorderColor<<red>> #E74C3C
hide <<red>> stereotype
skinparam ClassBackgroundColor<<purple>> #F4ECF7
skinparam ClassBorderColor<<purple>> #8E44AD
hide <<purple>> stereotype
skinparam ClassBackgroundColor<<blue>> #EBF5FB
skinparam ClassBorderColor<<blue>> #3498DB
hide <<blue>> stereotype
skinparam ClassBackgroundColor<<green>> #E9F7EF
skinparam ClassBorderColor<<green>> #27AE60
hide <<green>> stereotype
skinparam ClassBackgroundColor<<grey>> #EAECEE
skinparam ClassBorderColor<<grey>> #2C3E50
hide <<grey>> stereotype


package "org.calypsonet.terminal.reader" as readerApi {
    together {
        +class "**final** ReaderApiProperties" as ApiProperties {
            +{static} **final** String VERSION
        }
        +interface CardReader {
            +String getName ()
            +boolean isContactless ()
            +boolean isCardPresent ()
        }
        +interface ConfigurableCardReader extends CardReader {
            +void activateProtocol (String logicalProtocolName, String physicalProtocolName)
            +void deactivateProtocol (String logicalProtocolName)
            +String getCurrentProtocol ()
        }
        +interface ObservableCardReader extends CardReader {
            +void setReaderObservationExceptionHandler (CardReaderObservationExceptionHandlerSpi exceptionHandler)

            +void addObserver (CardReaderObserverSpi observer)
            +void removeObserver (CardReaderObserverSpi observer)
            +void clearObservers ()
            +int countObservers ()

            +void startCardDetection (DetectionMode detectionMode)
            +void stopCardDetection ()
            +void finalizeCardProcessing ()
        }
        +enum DetectionMode {
            REPEATING
            SINGLESHOT
        }
        +enum NotificationMode {
            ALWAYS
            MATCHED_ONLY
        }
        +interface CardReaderEvent {
            +String getReaderName ()
            +Type getType ()
            +ScheduledCardSelectionsResponse getScheduledCardSelectionsResponse ()
        }
        +enum "Type" as CardReaderEventType {
            CARD_INSERTED
            CARD_MATCHED
            CARD_REMOVED
            UNAVAILABLE
        }
        package "spi" as readerSpi {
            +interface CardReaderObserverSpi {
                +void onReaderEvent (CardReaderEvent cardReaderEvent)
            }
            +interface CardReaderObservationExceptionHandlerSpi {
                +void onReaderObservationError (String contextInfo, String readerName, Throwable e)
            }
        }
    }

    package "selection" as selectionApi {
        +interface CardSelectionManager {
            +void setMultipleSelectionMode ()

            +int prepareSelection (CardSelection cardSelection)
            +void prepareReleaseChannel ()

            +String exportCardSelectionScenario ()
            +int importCardSelectionScenario (String cardSelectionScenario)

            +CardSelectionResult processCardSelectionScenario (CardReader cardReader)

            +void scheduleCardSelectionScenario (ObservableCardReader observableCardReader, DetectionMode detectionMode, NotificationMode notificationMode)
            +CardSelectionResult parseScheduledCardSelectionsResponse (ScheduledCardSelectionsResponse scheduledCardSelectionsResponse)
        }

        package "spi" as selectionSpi {
            +interface CardSelection {
            }
            +interface "SmartCard" as SmartCard {
                +String getPowerOnData ()
                +byte[] getSelectApplicationResponse ()
            }
        }
        +interface CardSelectionResult {
            +Map<Integer, SmartCard> getSmartCards ()
            +SmartCard getActiveSmartCard ()
            +int getActiveSelectionIndex ()
        }
        +interface ScheduledCardSelectionsResponse {
        }

        +class "<<RuntimeException>>\nInvalidCardResponseException" as InvalidCardResponseException {
            +InvalidCardResponseException (String message)
            +InvalidCardResponseException (String message, Throwable cause)
        }
    }
        +class "<<RuntimeException>>\nReaderCommunicationException" as ReaderCommunicationException {
            +ReaderCommunicationException (String message)
            +ReaderCommunicationException (String message, Throwable cause)
        }
        +class "<<RuntimeException>>\nReaderProtocolNotSupportedException" as ReaderProtocolNotSupportedException {
            +ReaderProtocolNotSupportedException (String physicalProtocolName)
        }
        +class "<<RuntimeException>>\nCardCommunicationException" as CardCommunicationException {
            +CardCommunicationException (String message)
            +CardCommunicationException (String message, Throwable cause)
        }
}


ObservableCardReader +- - NotificationMode
ObservableCardReader +-left- DetectionMode
ObservableCardReader .left.> DetectionMode #27AE60 : use >
ObservableCardReader ..> CardReaderObservationExceptionHandlerSpi #27AE60 : use >

CardReaderEvent +- - CardReaderEventType
CardReaderEvent ..> CardReaderEventType #3498DB : provide >
CardReaderEvent .up.> ScheduledCardSelectionsResponse #3498DB : provide >

CardSelectionResult ..> SmartCard #3498DB : provide >

CardSelectionManager ..> CardSelection #27AE60 : use >
CardSelectionManager ..> ScheduledCardSelectionsResponse #27AE60 : use >
CardSelectionManager ..> CardSelectionResult #3498DB : provide >
CardSelectionManager .right.> CardReader #27AE60 : use >
CardSelectionManager ..> NotificationMode #27AE60 : use >
CardSelectionManager ..> DetectionMode #27AE60 : use >
CardSelectionManager ..> InvalidCardResponseException #3498DB : throw >

ObservableCardReader ..> CardReaderObserverSpi #27AE60 : use >

CardReaderObserverSpi ..> CardReaderEvent #27AE60 : use >


SmartCard -[hidden]- ReaderProtocolNotSupportedException
ReaderProtocolNotSupportedException -[hidden]- ReaderCommunicationException
ReaderCommunicationException -[hidden]right- CardCommunicationException


package readerApi #F8F9F9 {}
package readerSpi #F2F3F4 {}
package selectionApi #F2F3F4 {}
package selectionSpi #E5E7E9 {}

@enduml

PlantUML version 1.2022.13(Sat Nov 19 14:22:17 CET 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: Cp1252
Language: fr
Country: FR
--></g></svg>